{"{\"assumptions\":{},\"sourceRoot\":\"/Users/yusper/Desktop/Linkdin/MEVN/back/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yusper/Desktop/Linkdin/MEVN/back\",\"filename\":\"/Users/yusper/Desktop/Linkdin/MEVN/back/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yusper/Desktop/Linkdin/MEVN/back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.10:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _mongodb = require(\"mongodb\");\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\n// import cors from 'cors';\nvar app = (0, _express[\"default\"])(); // app.use(cors());\n\napp.use(_bodyParser[\"default\"].json());\napp.use('/image', _express[\"default\"][\"static\"](_path[\"default\"].join(__dirname, '../assets')));\napp.get('/api/products', /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res) {\n    var client, db, products;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _mongodb.MongoClient.connect('mongodb+srv://youssouph:g7s2aH9MgAZbNVX@fullstack-mevn.771oyqc.mongodb.net/?retryWrites=true&w=majority', {\n              useNewUrlParser: true,\n              useUnifiedTopology: true\n            });\n\n          case 2:\n            client = _context.sent;\n            db = client.db('blog');\n            _context.next = 6;\n            return db.collection('products').find({}).toArray();\n\n          case 6:\n            products = _context.sent;\n            res.status(200).json(products);\n            client.close();\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\napp.get('/api/users/:userId/cart', /*#__PURE__*/function () {\n  var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res) {\n    var userId, client, db, user, products, cartItemIds, cartItems;\n    return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            userId = req.params.userId;\n            _context2.next = 3;\n            return _mongodb.MongoClient.connect('mongodb+srv://youssouph:g7s2aH9MgAZbNVX@fullstack-mevn.771oyqc.mongodb.net/?retryWrites=true&w=majority', {\n              useNewUrlParser: true,\n              useUnifiedTopology: true\n            });\n\n          case 3:\n            client = _context2.sent;\n            db = client.db('blog');\n            _context2.next = 7;\n            return db.collection('users').findOne({\n              id: userId\n            });\n\n          case 7:\n            user = _context2.sent;\n\n            if (user) {\n              _context2.next = 10;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", res.status(404).json('Could not find user!'));\n\n          case 10:\n            _context2.next = 12;\n            return db.collection('products').find({}).toArray();\n\n          case 12:\n            products = _context2.sent;\n            cartItemIds = user.cartItems;\n            cartItems = cartItemIds.map(function (id) {\n              return products.find(function (product) {\n                return product.id === id;\n              });\n            });\n            res.status(200).json(cartItems);\n            client.close();\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}());\napp.get('/api/products/:productId', /*#__PURE__*/function () {\n  var _ref3 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(req, res) {\n    var productId, client, db, product;\n    return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            productId = req.params.productId;\n            _context3.next = 3;\n            return _mongodb.MongoClient.connect('mongodb+srv://youssouph:g7s2aH9MgAZbNVX@fullstack-mevn.771oyqc.mongodb.net/?retryWrites=true&w=majority', {\n              useNewUrlParser: true,\n              useUnifiedTopology: true\n            });\n\n          case 3:\n            client = _context3.sent;\n            db = client.db('blog');\n            _context3.next = 7;\n            return db.collection('products').findOne({\n              id: productId\n            });\n\n          case 7:\n            product = _context3.sent;\n\n            if (product) {\n              res.status(200).json(product);\n            } else {\n              res.status(404).json('Could not find the product!');\n            }\n\n            client.close();\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function (_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}());\napp.post('/api/users/:userId/cart', /*#__PURE__*/function () {\n  var _ref4 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res) {\n    var userId, productId, client, db, user, cartItemIds, products, cartItems;\n    return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            userId = req.params.userId;\n            productId = req.body.productId;\n            _context4.next = 4;\n            return _mongodb.MongoClient.connect('mongodb+srv://youssouph:g7s2aH9MgAZbNVX@fullstack-mevn.771oyqc.mongodb.net/?retryWrites=true&w=majority', {\n              useNewUrlParser: true,\n              useUnifiedTopology: true\n            });\n\n          case 4:\n            client = _context4.sent;\n            db = client.db('blog');\n            _context4.next = 8;\n            return db.collection('users').updateOne({\n              id: userId\n            }, {\n              $addToSet: {\n                cartItems: productId\n              }\n            });\n\n          case 8:\n            _context4.next = 10;\n            return db.collection('users').findOne({\n              id: userId\n            });\n\n          case 10:\n            user = _context4.sent;\n            cartItemIds = user.cartItems;\n            _context4.next = 14;\n            return db.collection('products').find({}).toArray();\n\n          case 14:\n            products = _context4.sent;\n            cartItems = cartItemIds.map(function (id) {\n              return products.find(function (product) {\n                return product.id === id;\n              });\n            });\n            res.status(200).json(cartItems);\n            client.close();\n\n          case 18:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function (_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}());\napp[\"delete\"]('/api/users/:userId/cart/:productId', /*#__PURE__*/function () {\n  var _ref5 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(req, res) {\n    var _req$params, userId, productId, client, db, user, products, cartItemIds, cartItems;\n\n    return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _req$params = req.params, userId = _req$params.userId, productId = _req$params.productId;\n            _context5.next = 3;\n            return _mongodb.MongoClient.connect('mongodb+srv://youssouph:g7s2aH9MgAZbNVX@fullstack-mevn.771oyqc.mongodb.net/?retryWrites=true&w=majority', {\n              useNewUrlParser: true,\n              useUnifiedTopology: true\n            });\n\n          case 3:\n            client = _context5.sent;\n            db = client.db('blog');\n            _context5.next = 7;\n            return db.collection('users').updateOne({\n              id: userId\n            }, {\n              $pull: {\n                cartItems: productId\n              }\n            });\n\n          case 7:\n            _context5.next = 9;\n            return db.collection('users').findOne({\n              id: userId\n            });\n\n          case 9:\n            user = _context5.sent;\n            _context5.next = 12;\n            return db.collection('products').find({}).toArray();\n\n          case 12:\n            products = _context5.sent;\n            cartItemIds = user.cartItems;\n            cartItems = cartItemIds.map(function (id) {\n              return products.find(function (product) {\n                return product.id === id;\n              });\n            });\n            res.status(200).json(cartItems);\n            client.close();\n\n          case 17:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function (_x9, _x10) {\n    return _ref5.apply(this, arguments);\n  };\n}());\n\nvar public_path = _path[\"default\"].join(__dirname, '../build');\n\napp.use(_express[\"default\"][\"static\"](public_path));\napp.get(\"*\", function (_, res) {\n  res.sendFile(_path[\"default\"].join(public_path, 'index.html'));\n});\napp.listen(process.env.PORT || 8000, function () {\n  console.log('Server is listening on port 8000');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHAiLCJleHByZXNzIiwidXNlIiwiYm9keVBhcnNlciIsImpzb24iLCJwYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsImdldCIsInJlcSIsInJlcyIsIk1vbmdvQ2xpZW50IiwiY29ubmVjdCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImNsaWVudCIsImRiIiwiY29sbGVjdGlvbiIsImZpbmQiLCJ0b0FycmF5IiwicHJvZHVjdHMiLCJzdGF0dXMiLCJjbG9zZSIsInVzZXJJZCIsInBhcmFtcyIsImZpbmRPbmUiLCJpZCIsInVzZXIiLCJjYXJ0SXRlbUlkcyIsImNhcnRJdGVtcyIsIm1hcCIsInByb2R1Y3QiLCJwcm9kdWN0SWQiLCJwb3N0IiwiYm9keSIsInVwZGF0ZU9uZSIsIiRhZGRUb1NldCIsIiRwdWxsIiwicHVibGljX3BhdGgiLCJfIiwic2VuZEZpbGUiLCJsaXN0ZW4iLCJwcm9jZXNzIiwiZW52IiwiUE9SVCIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95dXNwZXIvRGVza3RvcC9MaW5rZGluL01FVk4vYmFjay9zcmMvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSAnbW9uZ29kYic7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbi8vIGltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG4vLyBhcHAudXNlKGNvcnMoKSk7XG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcblxuYXBwLnVzZSgnL2ltYWdlJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL2Fzc2V0cycpKSk7XG5cblxuXG5hcHAuZ2V0KCcvYXBpL3Byb2R1Y3RzJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IE1vbmdvQ2xpZW50LmNvbm5lY3QoXG4gICAgJ21vbmdvZGIrc3J2Oi8veW91c3NvdXBoOmc3czJhSDlNZ0FaYk5WWEBmdWxsc3RhY2stbWV2bi43NzFveXFjLm1vbmdvZGIubmV0Lz9yZXRyeVdyaXRlcz10cnVlJnc9bWFqb3JpdHknLFxuICAgIHsgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLCB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUgfSxcbiAgKTtcbiAgY29uc3QgZGIgPSBjbGllbnQuZGIoJ2Jsb2cnKTtcbiAgY29uc3QgcHJvZHVjdHMgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCdwcm9kdWN0cycpLmZpbmQoe30pLnRvQXJyYXkoKTtcbiAgcmVzLnN0YXR1cygyMDApLmpzb24ocHJvZHVjdHMpO1xuICBjbGllbnQuY2xvc2UoKTtcbn0pO1xuXG5hcHAuZ2V0KCcvYXBpL3VzZXJzLzp1c2VySWQvY2FydCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgTW9uZ29DbGllbnQuY29ubmVjdChcbiAgICAnbW9uZ29kYitzcnY6Ly95b3Vzc291cGg6ZzdzMmFIOU1nQVpiTlZYQGZ1bGxzdGFjay1tZXZuLjc3MW95cWMubW9uZ29kYi5uZXQvP3JldHJ5V3JpdGVzPXRydWUmdz1tYWpvcml0eScsXG4gICAgeyB1c2VOZXdVcmxQYXJzZXI6IHRydWUsIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSB9LFxuICApO1xuICBjb25zdCBkYiA9IGNsaWVudC5kYignYmxvZycpOyAgXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmZpbmRPbmUoeyBpZDogdXNlcklkIH0pO1xuICBpZiAoIXVzZXIpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbignQ291bGQgbm90IGZpbmQgdXNlciEnKTtcbiAgY29uc3QgcHJvZHVjdHMgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCdwcm9kdWN0cycpLmZpbmQoe30pLnRvQXJyYXkoKTtcbiAgY29uc3QgY2FydEl0ZW1JZHMgPSB1c2VyLmNhcnRJdGVtcztcbiAgY29uc3QgY2FydEl0ZW1zID0gY2FydEl0ZW1JZHMubWFwKGlkID0+XG4gICAgcHJvZHVjdHMuZmluZChwcm9kdWN0ID0+IHByb2R1Y3QuaWQgPT09IGlkKSk7XG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKGNhcnRJdGVtcyk7XG4gIGNsaWVudC5jbG9zZSgpO1xufSk7XG5cbmFwcC5nZXQoJy9hcGkvcHJvZHVjdHMvOnByb2R1Y3RJZCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgcHJvZHVjdElkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IE1vbmdvQ2xpZW50LmNvbm5lY3QoXG4gICAgICAnbW9uZ29kYitzcnY6Ly95b3Vzc291cGg6ZzdzMmFIOU1nQVpiTlZYQGZ1bGxzdGFjay1tZXZuLjc3MW95cWMubW9uZ29kYi5uZXQvP3JldHJ5V3JpdGVzPXRydWUmdz1tYWpvcml0eScsXG4gICAgICB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0sXG4gICAgKTtcbiAgICBjb25zdCBkYiA9IGNsaWVudC5kYignYmxvZycpO1xuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCdwcm9kdWN0cycpLmZpbmRPbmUoeyBpZDogcHJvZHVjdElkIH0pO1xuICAgIGlmIChwcm9kdWN0KSB7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHByb2R1Y3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKCdDb3VsZCBub3QgZmluZCB0aGUgcHJvZHVjdCEnKTtcbiAgICB9XG4gICAgY2xpZW50LmNsb3NlKCk7XG59KTtcblxuYXBwLnBvc3QoJy9hcGkvdXNlcnMvOnVzZXJJZC9jYXJ0JywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICBjb25zdCB7IHByb2R1Y3RJZCB9ID0gcmVxLmJvZHk7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IE1vbmdvQ2xpZW50LmNvbm5lY3QoXG4gICAgJ21vbmdvZGIrc3J2Oi8veW91c3NvdXBoOmc3czJhSDlNZ0FaYk5WWEBmdWxsc3RhY2stbWV2bi43NzFveXFjLm1vbmdvZGIubmV0Lz9yZXRyeVdyaXRlcz10cnVlJnc9bWFqb3JpdHknLFxuICAgIHsgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLCB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUgfSxcbiAgKTtcbiAgY29uc3QgZGIgPSBjbGllbnQuZGIoJ2Jsb2cnKTtcbiAgYXdhaXQgZGIuY29sbGVjdGlvbigndXNlcnMnKS51cGRhdGVPbmUoeyBpZDogdXNlcklkIH0sIHtcbiAgICAkYWRkVG9TZXQ6IHsgY2FydEl0ZW1zOiBwcm9kdWN0SWQgfSxcbiAgfSk7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmZpbmRPbmUoeyBpZDogdXNlcklkIH0pO1xuICBjb25zdCBjYXJ0SXRlbUlkcyA9IHVzZXIuY2FydEl0ZW1zO1xuICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3Byb2R1Y3RzJykuZmluZCh7fSkudG9BcnJheSgpO1xuICBjb25zdCBjYXJ0SXRlbXMgPSBjYXJ0SXRlbUlkcy5tYXAoaWQgPT5cbiAgICBwcm9kdWN0cy5maW5kKHByb2R1Y3QgPT4gcHJvZHVjdC5pZCA9PT0gaWQpKTtcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oY2FydEl0ZW1zKTtcbiAgY2xpZW50LmNsb3NlKCk7XG59KTtcblxuYXBwLmRlbGV0ZSgnL2FwaS91c2Vycy86dXNlcklkL2NhcnQvOnByb2R1Y3RJZCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IHVzZXJJZCwgcHJvZHVjdElkIH0gPSByZXEucGFyYW1zO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBNb25nb0NsaWVudC5jb25uZWN0KFxuICAgICdtb25nb2RiK3NydjovL3lvdXNzb3VwaDpnN3MyYUg5TWdBWmJOVlhAZnVsbHN0YWNrLW1ldm4uNzcxb3lxYy5tb25nb2RiLm5ldC8/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5JyxcbiAgICB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0sXG4gICk7XG4gIGNvbnN0IGRiID0gY2xpZW50LmRiKCdibG9nJyk7XG5cbiAgYXdhaXQgZGIuY29sbGVjdGlvbigndXNlcnMnKS51cGRhdGVPbmUoeyBpZDogdXNlcklkIH0sIHtcbiAgICAkcHVsbDogeyBjYXJ0SXRlbXM6IHByb2R1Y3RJZCB9LFxuICB9KTtcbiAgY29uc3QgdXNlciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZmluZE9uZSh7IGlkOiB1c2VySWQgfSk7XG4gIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgZGIuY29sbGVjdGlvbigncHJvZHVjdHMnKS5maW5kKHt9KS50b0FycmF5KCk7XG4gIGNvbnN0IGNhcnRJdGVtSWRzID0gdXNlci5jYXJ0SXRlbXM7XG4gIGNvbnN0IGNhcnRJdGVtcyA9IGNhcnRJdGVtSWRzLm1hcChpZCA9PlxuICAgIHByb2R1Y3RzLmZpbmQocHJvZHVjdCA9PiBwcm9kdWN0LmlkID09PSBpZCkpO1xuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKGNhcnRJdGVtcyk7XG4gIGNsaWVudC5jbG9zZSgpO1xufSk7XG5jb25zdCBwdWJsaWNfcGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi9idWlsZCcpO1xuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwdWJsaWNfcGF0aCkpO1xuYXBwLmdldChcIipcIiwgKF8sIHJlcykgPT4ge1xuICByZXMuc2VuZEZpbGUocGF0aC5qb2luKHB1YmxpY19wYXRoLCAnaW5kZXguaHRtbCcpKTtcbn0pXG5hcHAubGlzdGVuKCBwcm9jZXNzLmVudi5QT1JUIHx8IDgwMDAsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnU2VydmVyIGlzIGxpc3RlbmluZyBvbiBwb3J0IDgwMDAnKTtcbn0pOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTtBQUVBLElBQU1BLEdBQUcsR0FBRyxJQUFBQyxtQkFBQSxHQUFaLEMsQ0FDQTs7QUFDQUQsR0FBRyxDQUFDRSxHQUFKLENBQVFDLHNCQUFBLENBQVdDLElBQVgsRUFBUjtBQUVBSixHQUFHLENBQUNFLEdBQUosQ0FBUSxRQUFSLEVBQWtCRCxtQkFBQSxXQUFlSSxnQkFBQSxDQUFLQyxJQUFMLENBQVVDLFNBQVYsRUFBcUIsV0FBckIsQ0FBZixDQUFsQjtBQUlBUCxHQUFHLENBQUNRLEdBQUosQ0FBUSxlQUFSO0VBQUEseUZBQXlCLGlCQUFPQyxHQUFQLEVBQVlDLEdBQVo7SUFBQTtJQUFBO01BQUE7UUFBQTtVQUFBO1lBQUE7WUFBQSxPQUNGQyxvQkFBQSxDQUFZQyxPQUFaLENBQ25CLHlHQURtQixFQUVuQjtjQUFFQyxlQUFlLEVBQUUsSUFBbkI7Y0FBeUJDLGtCQUFrQixFQUFFO1lBQTdDLENBRm1CLENBREU7O1VBQUE7WUFDakJDLE1BRGlCO1lBS2pCQyxFQUxpQixHQUtaRCxNQUFNLENBQUNDLEVBQVAsQ0FBVSxNQUFWLENBTFk7WUFBQTtZQUFBLE9BTUFBLEVBQUUsQ0FBQ0MsVUFBSCxDQUFjLFVBQWQsRUFBMEJDLElBQTFCLENBQStCLEVBQS9CLEVBQW1DQyxPQUFuQyxFQU5BOztVQUFBO1lBTWpCQyxRQU5pQjtZQU92QlYsR0FBRyxDQUFDVyxNQUFKLENBQVcsR0FBWCxFQUFnQmpCLElBQWhCLENBQXFCZ0IsUUFBckI7WUFDQUwsTUFBTSxDQUFDTyxLQUFQOztVQVJ1QjtVQUFBO1lBQUE7UUFBQTtNQUFBO0lBQUE7RUFBQSxDQUF6Qjs7RUFBQTtJQUFBO0VBQUE7QUFBQTtBQVdBdEIsR0FBRyxD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","map":{"version":3,"names":["app","express","use","bodyParser","json","path","join","__dirname","get","req","res","MongoClient","connect","useNewUrlParser","useUnifiedTopology","client","db","collection","find","toArray","products","status","close","userId","params","findOne","id","user","cartItemIds","cartItems","map","product","productId","post","body","updateOne","$addToSet","$pull","public_path","_","sendFile","listen","process","env","PORT","console","log"],"sourceRoot":"/Users/yusper/Desktop/Linkdin/MEVN/back/src/","sources":["index.js"],"sourcesContent":["import express from 'express';\nimport bodyParser from 'body-parser';\nimport { MongoClient } from 'mongodb';\nimport path from 'path';\n// import cors from 'cors';\n\nconst app = express();\n// app.use(cors());\napp.use(bodyParser.json());\n\napp.use('/image', express.static(path.join(__dirname, '../assets')));\n\n\n\napp.get('/api/products', async (req, res) => {\n  const client = await MongoClient.connect(\n    'mongodb+srv://youssouph:g7s2aH9MgAZbNVX@fullstack-mevn.771oyqc.mongodb.net/?retryWrites=true&w=majority',\n    { useNewUrlParser: true, useUnifiedTopology: true },\n  );\n  const db = client.db('blog');\n  const products = await db.collection('products').find({}).toArray();\n  res.status(200).json(products);\n  client.close();\n});\n\napp.get('/api/users/:userId/cart', async (req, res) => {\n  const { userId } = req.params;\n  const client = await MongoClient.connect(\n    'mongodb+srv://youssouph:g7s2aH9MgAZbNVX@fullstack-mevn.771oyqc.mongodb.net/?retryWrites=true&w=majority',\n    { useNewUrlParser: true, useUnifiedTopology: true },\n  );\n  const db = client.db('blog');  \n  const user = await db.collection('users').findOne({ id: userId });\n  if (!user) return res.status(404).json('Could not find user!');\n  const products = await db.collection('products').find({}).toArray();\n  const cartItemIds = user.cartItems;\n  const cartItems = cartItemIds.map(id =>\n    products.find(product => product.id === id));\n  res.status(200).json(cartItems);\n  client.close();\n});\n\napp.get('/api/products/:productId', async (req, res) => {\n    const { productId } = req.params;\n    const client = await MongoClient.connect(\n      'mongodb+srv://youssouph:g7s2aH9MgAZbNVX@fullstack-mevn.771oyqc.mongodb.net/?retryWrites=true&w=majority',\n      { useNewUrlParser: true, useUnifiedTopology: true },\n    );\n    const db = client.db('blog');\n    const product = await db.collection('products').findOne({ id: productId });\n    if (product) {\n        res.status(200).json(product);\n    } else {\n        res.status(404).json('Could not find the product!');\n    }\n    client.close();\n});\n\napp.post('/api/users/:userId/cart', async (req, res) => {\n  const { userId } = req.params;\n  const { productId } = req.body;\n  const client = await MongoClient.connect(\n    'mongodb+srv://youssouph:g7s2aH9MgAZbNVX@fullstack-mevn.771oyqc.mongodb.net/?retryWrites=true&w=majority',\n    { useNewUrlParser: true, useUnifiedTopology: true },\n  );\n  const db = client.db('blog');\n  await db.collection('users').updateOne({ id: userId }, {\n    $addToSet: { cartItems: productId },\n  });\n  const user = await db.collection('users').findOne({ id: userId });\n  const cartItemIds = user.cartItems;\n  const products = await db.collection('products').find({}).toArray();\n  const cartItems = cartItemIds.map(id =>\n    products.find(product => product.id === id));\n  res.status(200).json(cartItems);\n  client.close();\n});\n\napp.delete('/api/users/:userId/cart/:productId', async (req, res) => {\n  const { userId, productId } = req.params;\n  const client = await MongoClient.connect(\n    'mongodb+srv://youssouph:g7s2aH9MgAZbNVX@fullstack-mevn.771oyqc.mongodb.net/?retryWrites=true&w=majority',\n    { useNewUrlParser: true, useUnifiedTopology: true },\n  );\n  const db = client.db('blog');\n\n  await db.collection('users').updateOne({ id: userId }, {\n    $pull: { cartItems: productId },\n  });\n  const user = await db.collection('users').findOne({ id: userId });\n  const products = await db.collection('products').find({}).toArray();\n  const cartItemIds = user.cartItems;\n  const cartItems = cartItemIds.map(id =>\n    products.find(product => product.id === id));\n\n  res.status(200).json(cartItems);\n  client.close();\n});\nconst public_path = path.join(__dirname, '../build');\napp.use(express.static(public_path));\napp.get(\"*\", (_, res) => {\n  res.sendFile(path.join(public_path, 'index.html'));\n})\napp.listen( process.env.PORT || 8000, () => {\n    console.log('Server is listening on port 8000');\n});"],"mappings":"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"}},"mtime":1660855774385}}